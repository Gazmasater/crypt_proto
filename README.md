mx0vglmT3srN1IS19H
135bb7a7509e4421bad692415c53753b



sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target



wbs-api.mexc.com/ws 


[https://edis-global.vercel.app/ru/vps-hosting/singapore-singapore
](https://sg.edisglobal.com/)



git pull --rebase origin privat
git push origin privat


BOOK_INTERVAL=100ms
SYMBOLS_FILE=triangles_markets.csv
DEBUG=false


import (
    // ...
    "net/http"
    _ "net/http/pprof"
)


   // pprof HTTP-сервер
    go func() {
        log.Println("pprof on http://localhost:6060/debug/pprof/")
        if err := http.ListenAndServe("localhost:6060", nil); err != nil {
            log.Printf("pprof server error: %v", err)
        }
    }()


	go tool pprof http://localhost:6060/debug/pprof/profile?seconds=30


(pprof) top        # показать топ функций по CPU
(pprof) top10
(pprof) list parsePBWrapperMid   # подробный разбор одной функции
(pprof) quit


go tool pprof http://localhost:6060/debug/pprof/heap


(pprof) top
(pprof) top -cum
(pprof) list parsePBWrapperMid
(pprof) quit





[ARB] -0.013%  USDT→BDX→BTC→USDT  maxStart=306.1925 USDT (306.1925 USDT)  safeStart=306.1925 USDT (306.1925 USDT) (x1.00)  bottleneck=BDXUSDT
  BDXUSDT (BDX/USDT): bid=0.0913100000 ask=0.0915100000  spread=0.0002000000 (0.21879%)  bidQty=6774.5500 askQty=3346.0000
  BDXBTC (BDX/BTC): bid=0.0000010430 ask=0.0000010436  spread=0.0000000006 (0.05751%)  bidQty=3675.0000 askQty=722.0000
  BTCUSDT (BTC/USDT): bid=87831.3300000000 ask=87831.3900000000  spread=0.0600000000 (0.00007%)  bidQty=0.0057 askQty=1.8749

  [REAL EXEC] start=3.000000 USDT triangle=USDT→BDX→BTC→USDT
    [REAL EXEC] legs: sym1=BDXUSDT sym2=BDXBTC sym3=BTCUSDT
    [REAL EXEC] parsed: sym1=BDXUSDT (BDX/USDT) sym2=BDXBTC (BDX/BTC) sym3=BTCUSDT (BTC/USDT)
    [REAL EXEC] >>> GetBalance USDT (before)
    [REAL EXEC] <<< GetBalance USDT (before) (366ms)
    [REAL EXEC] BAL before: USDT=35.750330681146
    [REAL EXEC] >>> GetBalance BDX (before leg1)
    [REAL EXEC] <<< GetBalance BDX (before leg1) (230ms)
    [REAL EXEC] leg1 PRE: BUY BDXUSDT by USDT=3.000000 ask=0.0915100000 bid=0.0913100000 | BDX before=0.000000000000
    [REAL EXEC] >>> SmartMarketBuyUSDT leg1
    [REAL EXEC] <<< SmartMarketBuyUSDT leg1 (565ms)
    [REAL EXEC] leg1 PLACE OK: orderId=C02__629753757927804928022
    [REAL EXEC] >>> waitBalanceChange BDX (after leg1)
    [REAL EXEC] <<< waitBalanceChange BDX (after leg1) (241ms)
    [REAL EXEC] leg1 BAL after: BDX=32.000000000000 delta=32.000000000000
    [REAL EXEC] >>> GetBalance BDX (before leg2)
    [REAL EXEC] <<< GetBalance BDX (before leg2) (242ms)
    [REAL EXEC] >>> GetBalance BTC (before leg2)
    [REAL EXEC] <<< GetBalance BTC (before leg2) (242ms)
    [REAL EXEC] leg2 PRE: SELL BDXBTC qty=BDX=31.840000000000 (safety x0.995000) bid=0.0000010369 ask=0.0000010436 | BDX before=32.000000000000 BTC before=0.000000000000
    [REAL EXEC] >>> SmartMarketSellQty leg2
    [REAL EXEC] <<< SmartMarketSellQty leg2 (565ms)
    [REAL EXEC] leg2 PLACE OK: orderId=C02__629753763032268800022
    [REAL EXEC] >>> waitBalanceChange BTC (after leg2)
    [REAL EXEC] <<< waitBalanceChange BTC (after leg2) (239ms)
    [REAL EXEC] leg2 BAL after: BTC=0.000032127828 delta=0.000032127828
    [REAL EXEC] >>> GetBalance BTC (before leg3)
2025-12-17 02:20:33.780
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8400000000 ask=87671.0300000000  spread=24.1900000000 (0.02760%)  bidQty=0.0106 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=1.5292 askQty=1.8749

2025-12-17 02:20:33.785
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8400000000 ask=87671.0300000000  spread=24.1900000000 (0.02760%)  bidQty=0.0106 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.4000000000  spread=0.0800000000 (0.00009%)  bidQty=1.5292 askQty=0.0022

    [REAL EXEC] <<< GetBalance BTC (before leg3) (238ms)
    [REAL EXEC] >>> GetBalance USDT (before leg3)
2025-12-17 02:20:33.796
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8400000000 ask=87671.0300000000  spread=24.1900000000 (0.02760%)  bidQty=0.0106 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.1239 askQty=3.7834

2025-12-17 02:20:33.806
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87653.4700000000 ask=87671.0300000000  spread=17.5600000000 (0.02003%)  bidQty=0.0009 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0929 askQty=3.7834

2025-12-17 02:20:33.817
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87653.4700000000 ask=87671.0300000000  spread=17.5600000000 (0.02003%)  bidQty=0.0009 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

2025-12-17 02:20:33.824
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87653.4700000000 ask=87671.0300000000  spread=17.5600000000 (0.02003%)  bidQty=0.0009 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0620 askQty=3.7834

2025-12-17 02:20:33.835
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87653.4700000000 ask=87671.0300000000  spread=17.5600000000 (0.02003%)  bidQty=0.0009 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

2025-12-17 02:20:33.968
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=5.2445 USDT (5.2445 USDT)  safeStart=5.2445 USDT (5.2445 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87651.7600000000 ask=87671.0300000000  spread=19.2700000000 (0.02198%)  bidQty=0.0009 askQty=0.0001
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

2025-12-17 02:20:34.009
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=2722.5785 USDT (2722.5785 USDT)  safeStart=2722.5785 USDT (2722.5785 USDT) (x1.00)  bottleneck=BTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87651.7600000000 ask=87671.0200000000  spread=19.2600000000 (0.02197%)  bidQty=0.0009 askQty=0.0317
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

    [REAL EXEC] <<< GetBalance USDT (before leg3) (223ms)
    [REAL EXEC] leg3 PRE: SELL BTCUSDT qty=BTC=0.000031967189 (safety x0.995000) bid=87831.3300000000 ask=87831.3900000000 | BTC before=0.000032127828 USDT before=32.820546521146
    [REAL EXEC] >>> SmartMarketSellQty leg3
2025-12-17 02:20:34.110
[ARB] -0.097%  USDT→WBTC→BTC→USDT  maxStart=2722.5785 USDT (2722.5785 USDT)  safeStart=2722.5785 USDT (2722.5785 USDT) (x1.00)  bottleneck=BTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8500000000 ask=87671.0200000000  spread=24.1700000000 (0.02757%)  bidQty=0.0009 askQty=0.0317
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

2025-12-17 02:20:34.185
[ARB] -0.065%  USDT→TON→USDC→USDT  maxStart=23.6382 USDT (23.6382 USDT)  safeStart=23.6382 USDT (23.6382 USDT) (x1.00)  bottleneck=TONUSDT
  TONUSDT (TON/USDT): bid=1.5460000000 ask=1.5470000000  spread=0.0010000000 (0.06466%)  bidQty=2553.0600 askQty=15.2800
  TONUSDC (TON/USDC): bid=1.5480000000 ask=1.5490000000  spread=0.0010000000 (0.06458%)  bidQty=29.7300 askQty=20.4500
  USDCUSDT (USDC/USDT): bid=0.9999000000 ask=1.0000000000  spread=0.0001000000 (0.01000%)  bidQty=1839728.0600 askQty=130865.8800

2025-12-17 02:20:34.194
[ARB] -0.065%  USDT→TON→USDC→USDT  maxStart=35.4263 USDT (35.4263 USDT)  safeStart=35.4263 USDT (35.4263 USDT) (x1.00)  bottleneck=TONUSDT
  TONUSDT (TON/USDT): bid=1.5460000000 ask=1.5470000000  spread=0.0010000000 (0.06466%)  bidQty=2553.0600 askQty=22.9000
  TONUSDC (TON/USDC): bid=1.5480000000 ask=1.5490000000  spread=0.0010000000 (0.06458%)  bidQty=29.7300 askQty=20.4500
  USDCUSDT (USDC/USDT): bid=0.9999000000 ask=1.0000000000  spread=0.0001000000 (0.01000%)  bidQty=1839728.0600 askQty=130865.8800

2025-12-17 02:20:34.208
[ARB] -0.065%  USDT→TON→USDC→USDT  maxStart=46.0107 USDT (46.0107 USDT)  safeStart=46.0107 USDT (46.0107 USDT) (x1.00)  bottleneck=TONUSDC
  TONUSDT (TON/USDT): bid=1.5460000000 ask=1.5470000000  spread=0.0010000000 (0.06466%)  bidQty=2553.0600 askQty=128.7300
  TONUSDC (TON/USDC): bid=1.5480000000 ask=1.5490000000  spread=0.0010000000 (0.06458%)  bidQty=29.7300 askQty=20.4500
  USDCUSDT (USDC/USDT): bid=0.9999000000 ask=1.0000000000  spread=0.0001000000 (0.01000%)  bidQty=1839728.0600 askQty=130865.8800

2025-12-17 02:20:34.281
[ARB] -0.100%  USDT→WBTC→BTC→USDT  maxStart=2722.6483 USDT (2722.6483 USDT)  safeStart=2722.6483 USDT (2722.6483 USDT) (x1.00)  bottleneck=BTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8500000000 ask=87673.2700000000  spread=26.4200000000 (0.03014%)  bidQty=0.0009 askQty=0.0317
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0310 askQty=3.7834

    [REAL EXEC] <<< SmartMarketSellQty leg3 (293ms)
    [REAL EXEC] leg3 PLACE ERR: qty<=0 after normalize (raw=0.000031967189)
2025-12-17 02:20:34.598
[ARB] -0.100%  USDT→WBTC→BTC→USDT  maxStart=2774.9774 USDT (2774.9774 USDT)  safeStart=2774.9774 USDT (2774.9774 USDT) (x1.00)  bottleneck=WBTCUSDT
  WBTCUSDT (WBTC/USDT): bid=87646.8500000000 ask=87673.2700000000  spread=26.4200000000 (0.03014%)  bidQty=0.0009 askQty=0.0317
  WBTCBTC (WBTC/BTC): bid=0.9984000000 ask=0.9993000000  spread=0.0009000000 (0.09010%)  bidQty=1.3822 askQty=0.0017
  BTCUSDT (BTC/USDT): bid=87831.3200000000 ask=87831.3900000000  spread=0.0700000000 (0.00008%)  bidQty=0.0747 askQty=3.7834



